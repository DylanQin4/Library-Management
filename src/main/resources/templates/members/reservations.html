<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Réservations</title>
    <link rel="stylesheet" href="/css/tailwind-output.css">
</head>
<body class="bg-gray-50 dark:bg-gray-900">
<div th:replace="~{layout/navbar :: navbar}"></div>
<div class="relative" th:replace="~{layout/sidebar :: sidebar}"></div>

<div class="p-8 pt-20 sm:ml-64">
    <div class="mb-6">
        <h1 class="text-3xl font-extrabold text-gray-800 dark:text-gray-200 mb-2">Réservations de l'adhérent</h1>
        <p class="text-gray-600 dark:text-gray-400">
            Adhérent : <span th:text="${member.fullName}"></span> |
            Email : <span th:text="${member.email}"></span>
        </p>
        <a th:href="@{/members}" class="btn-secondary mt-4">← Retour à la liste</a>
    </div>

    <!-- Aucune réservation -->
    <div th:if="${#lists.isEmpty(reservations)}"
         class="p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 dark:bg-gray-800 dark:text-blue-400">
        Cet adhérent n’a fait aucune réservation.
    </div>

    <!-- Liste des réservations -->
    <div th:if="${not #lists.isEmpty(reservations)}"
         class="relative mt-6 overflow-x-auto shadow-lg sm:rounded-lg">
        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
            <thead class="text-xs text-gray-700 uppercase bg-gray-200 dark:bg-gray-700 dark:text-gray-300">
            <tr>
                <th class="px-4 py-3">Titre du livre</th>
                <th class="px-4 py-3">Date de réservation</th>
                <th class="px-4 py-3">Expiration</th>
                <th class="px-4 py-3">Statut</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="res : ${reservations}"
                class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                <td class="px-4 py-4 font-medium text-gray-900 dark:text-white"
                    th:text="${res.book.title}">Livre</td>
                <td class="px-4 py-4" th:text="${#temporals.format(res.reservationDate, 'dd/MM/yyyy')}"></td>
                <td class="px-4 py-4" th:text="${#temporals.format(res.expiryDate, 'dd/MM/yyyy')}"></td>
                <td class="px-4 py-4" th:text="${res.fulfilled ? 'Réalisée' : 'En attente'}"
                    th:classappend="${res.fulfilled ? 'text-green-600' : 'text-yellow-600'}">
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<style>
    .btn-secondary {
        @apply inline-block text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100
        focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5
        dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700;
    }
</style>
</body>
</html>
